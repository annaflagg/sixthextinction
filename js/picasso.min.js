function mousewheel(e){scrollpos=Math.max(0,$(window).scrollTop());var t=Math.max(-1,Math.min(1,e.wheelDelta));if(frogActive(scrollpos)){document.getElementById("statsid").style.opacity=0;document.getElementById("froggydiv").style.opacity=1;e.preventDefault();frogplayer.currentTime(frogplayer.currentTime()+ -t*speed)}else{document.getElementById("froggydiv").style.opacity=0}}function frogActive(e){if(frogplayer.currentTime()<froglength){return true}if($(window).scrollTop()<0){return true}return false}frogplayer=videojs("frogvideo");frogplayer.on("loadeddata",function(){playerready=true;frogplayer.currentTime(0);console.log("frog loaded");window.addEventListener("mousewheel",function(e){mousewheel(e)})});var speed=.029;var frogscrollspan=800;var froglength=3.88;(function(){$(function(){function w(){d3.selectAll(".number").classed("visnumber",false);d3.selectAll(".number").classed("deselectednumber",false);d3.selectAll(".group").classed("deselectedgroup",false)}var e=["translateX","translateY","opacity","rotate","scale"],t=$(window),n=$("body"),r=[],i=null,s=0,o=0,u=0,a=0,f=0,l=0,c=0,h=0,p=document.getElementById("froggydiv"),d=false,v=.005,m=videojs("frogvideo"),g=[{wrapper:"#intro",duration:"100%",animations:[{selector:".stats",translateY:-485},{selector:".copy",translateY:-100,opacity:-.2},{selector:"#stat0number",translateY:23,scale:.3,translateX:-35},{selector:"#stat1number",translateY:23,scale:.3,translateX:-32},{selector:"#stat2number",translateY:23,scale:.3,translateX:-33},{selector:"#stat3number",translateY:23,scale:.3,translateX:-30},{selector:"#stat0group"},{selector:"#stat1group"},{selector:"#stat2group"},{selector:"#stat3group"}]},{duration:"100%",animations:[]}];init=function(){window.requestAnimationFrame(updatePage);setupValues()};setupValues=function(){l=t.scrollTop();u=t.height();a=t.width();convertAllPropsToPx();buildPage()};buildPage=function(){var e,s,u;for(e=0;e<g.length;e++){o+=g[e].duration;if($.inArray(g[e].wrapper,r)==-1){r.push(g[e].wrapper)}for(s=0;s<g[e].animations.length;s++){Object.keys(g[e].animations[s]).forEach(function(t){value=g[e].animations[s][t];if(t!=="selector"&&value instanceof Array===false){var n=[];n.push(getDefaultPropertyValue(t),value);value=n}g[e].animations[s][t]=value})}}n.height(o);t.scroll(0);i=r[0];$(i).show()};convertAllPropsToPx=function(){var e,t,n;for(e=0;e<g.length;e++){g[e].duration=convertPercentToPx(g[e].duration,"y");for(t=0;t<g[e].animations.length;t++){Object.keys(g[e].animations[t]).forEach(function(r){value=g[e].animations[t][r];if(r!=="selector"){if(value instanceof Array){for(n=0;n<value.length;n++){if(typeof value[n]==="string"){if(r==="translateY"){value[n]=convertPercentToPx(value[n],"y")}else{value[n]=convertPercentToPx(value[n],"x")}}}}else{if(typeof value==="string"){if(r==="translateY"){value=convertPercentToPx(value,"y")}else{value=convertPercentToPx(value,"x")}}}g[e].animations[t][r]=value}})}}};getDefaultPropertyValue=function(e){switch(e){case"translateX":return 0;case"translateY":return 0;case"scale":return 1;case"rotate":return 0;case"opacity":return 1;default:return null}};updatePage=function(){if(frogActive()){window.requestAnimationFrame(updatePage);return}setScrollTops();if(l>0&&l<=o-u){animateElements();setKeyframe();scrollpos=Math.max(0,$(window).scrollTop());vis(scrollpos)}window.requestAnimationFrame(updatePage)};var y=600;var b=true;vis=function(e){if(e>y){if(b){updateStatHighlights();showVis();b=false}}else{if(!b){w();hideVis();b=true}}};toggleStats=function(e){if(e>frogspan){document.getElementById("statsid").style.opacity=1}else{document.getElementById("statsid").style.opacity=0}};setScrollTops=function(){l=t.scrollTop();c=l-f};animateElements=function(){var e,t,n,r,i,s;for(var o=0;o<g[h].animations.length;o++){e=g[h].animations[o];t=calcPropValue(e,"translateY");n=calcPropValue(e,"translateX");r=calcPropValue(e,"scale");i=calcPropValue(e,"rotate");s=calcPropValue(e,"opacity");$(e.selector).css({transform:"translate3d("+n+"px, "+t+"px, 0) scale("+r+") rotate("+i+"deg)",opacity:s})}};calcPropValue=function(e,t){var n=e[t];if(n){n=easeInOutQuad(c,n[0],n[1]-n[0],g[h].duration)}else{n=getDefaultPropertyValue(t)}return n};easeInOutQuad=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t};setKeyframe=function(){if(l>g[h].duration+f){f+=g[h].duration;h++;showCurrentWrappers()}else if(l<f){h--;f-=g[h].duration;showCurrentWrappers()}};showCurrentWrappers=function(){var e;if(g[h].wrapper!=i){$(i).hide();$(g[h].wrapper).show();i=g[h].wrapper}};convertPercentToPx=function(e,t){if(typeof e==="string"&&e.match(/%/g)){if(t==="y")e=parseFloat(e)/100*u;if(t==="x")e=parseFloat(e)/100*a}return e};throwError=function(){n.addClass("page-error")};isTouchDevice=function(){return"ontouchstart"in window||"onmsgesturechange"in window};init()})}).call(this)