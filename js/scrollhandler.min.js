function resetFrog(){frogplayer.play();frogplayer.pause();frogplayer.currentTime(0)}function scrollToTop(){if(isFirefox()){$("html,body").animate({scrollTop:0},"slow")}else{$(window).scrollTop(0)}}function setBrowserSpecificParms(){if(isFirefox()){mousewheelevt="DOMMouseScroll";speed=.033}if(isSafari()){speed=.015}}function safeStopPropogation(e){e.cancelBubble=true;if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault()}function mousewheel(e){if(!playerready||!startedeverything){return}var t=window.event||e;scrollpos=Math.max(0,$(window).scrollTop());var n=Math.max(-1,Math.min(1,t.detail?t.detail*-1:t.wheelDelta));if(frogActive(scrollpos)){t.preventDefault();frogplayer.currentTime(frogplayer.currentTime()+ -n*speed)}else{}}function frogActive(e){if(frogplayer.currentTime()<froglength){return true}var t=-1;if(isFirefox()){t=0}if($(window).scrollTop()<=t){return true}return false}function isFirefox(){if(navigator.userAgent.indexOf("Firefox")!=-1&&parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf("Firefox")+8))>=3.6){return true}return false}function isSafari(){var e=navigator.userAgent.toLowerCase();if(e.indexOf("safari")!=-1){if(e.indexOf("chrome")==-1){return true}}return false}function toggleScroll(){}var speed=.015;var mousewheelevt="mousewheel";setBrowserSpecificParms();window.addEventListener(mousewheelevt,function(e){mousewheel(e)});frogplayer=videojs("frogvideo");frogplayer.on("loadeddata",function(){scrollToTop();incrementProgress();playerready=true;resetFrog()});var frogscrollspan=800;var froglength=3.88;var togglescrollpos=3.88;(function(){$(function(){var e=["translateX","translateY","opacity","rotate","scale"],t=$(window),n=$("body"),r=[],i=null,s=0,o=0,u=0,a=0,f=0,l=0,c=0,h=0,p=0,d=document.getElementById("froggydiv"),v=.005,m=videojs("frogvideo"),g=[{wrapper:"#intro",duration:"100%",animations:[{selector:".copy",translateY:-25,opacity:[10,.2]},{selector:"#froggydiv",opacity:[1,.2]},{selector:"#mammalsviddiv",opacity:[0,0]}]},{wrapper:"#vis",duration:"100%",animations:[{selector:".copy",opacity:[0,0]},{selector:"#froggydiv",opacity:[0,0]},{selector:".viscopy",translateY:[-25,-25],opacity:[1,1]},{selector:"#mammalsviddiv",opacity:[1,1]}]},{wrapper:"#vis",duration:"50%",animations:[{selector:"#mammalsviddiv",opacity:[1,1]},{selector:"#reptilesviddiv",opacity:[0,0]}]},{wrapper:"#vis",duration:"100%",animations:[{selector:"#mammalsviddiv",opacity:[0,0]},{selector:"#reptilesviddiv",opacity:[1,1]}]},{wrapper:"#vis",duration:"50%",animations:[{selector:"#reptilesviddiv",opacity:[1,1]},{selector:"#amphibiansviddiv",opacity:[0,0]}]},{wrapper:"#vis",duration:"100%",animations:[{selector:"#reptilesviddiv",opacity:[0,0]},{selector:"#amphibiansviddiv",opacity:[1,1]}]},{wrapper:"#vis",duration:"50%",animations:[{selector:"#amphibiansviddiv",opacity:[1,1]},{selector:"#birdsviddiv",opacity:[0,0]}]},{wrapper:"#vis",duration:"100%",animations:[{selector:"#amphibiansviddiv",opacity:[0,0]},{selector:"#birdsviddiv",opacity:[1,1]}]},{wrapper:"#vis",duration:"50%",animations:[{selector:"#amphibiansviddiv",opacity:[0,0]},{selector:"#birdsviddiv",opacity:[1,1]},{selector:".endingfooter",opacity:[0,0]},{selector:".credits",opacity:[0,0]},{selector:".endingfooter",opacity:[0,0]}]},{wrapper:"#creditsid",duration:"100%",animations:[{selector:".credits",translateY:-15,opacity:[.2,10]},{selector:"#birdsviddiv",opacity:[0,0]},{selector:".endingfooter",opacity:[1,1]}]},{duration:"100%",animations:[]}];init=function(){t.scrollTop(0);scrollIntervalID=setInterval(updatePage,1);setupValues();incrementProgress()};setupValues=function(){l=0;t.scrollTop();u=t.height();a=t.width();convertAllPropsToPx();buildPage();setupButtons()};var y={0:"1%",1:"125%",2:"325%",3:"450%",4:"650%",5:"800%"};var b={1:1,2:1,3:2,4:2,5:0,6:0,7:3,8:3};var w={1:"mammalsbutton",2:"mammalsbutton",3:"reptilesbutton",4:"reptilesbutton",5:"amphibiansbutton",6:"amphibiansbutton",7:"birdsbutton",8:"birdsbutton",9:"sourcesbutton"};var E={0:0,1:1,2:1,3:2,4:2,5:3,6:3,7:4,8:4,9:5};var S=false;var x=false;setupButtons=function(){$("#titlebutton").on("click",function(){clickButton(0,d3.select(this))});$("#mammalsbutton").on("click",function(){clickButton(1,d3.select(this))});$("#reptilesbutton").on("click",function(){clickButton(2,d3.select(this))});$("#amphibiansbutton").on("click",function(){clickButton(3,d3.select(this))});$("#birdsbutton").on("click",function(){clickButton(4,d3.select(this))});$("#sourcebuttonspanid").on("click",function(){clickButton(5,d3.select(this))});$("#scrollbutton").on("click",function(){S=true});updateButtons(d3.select(document.getElementById("titlebutton"),0))};clickButton=function(e,n){if(!playerready||!startedeverything){return}frogplayer.currentTime(froglength);if(e==0){x=true;document.getElementById("ttipdiv").style["display"]="none"}else{document.getElementById("ttipdiv").style["display"]="block"}t.scrollTop(convertPercentToPx(y[e],"y"));updateButtons(n,e);updatePage();if(e==0){frogplayer.currentTime(0)}};updateButtons=function(e,t){d3.selectAll(".sectionButton").classed("selectedSectionButton",false);d3.selectAll(".sourcebuttonspan").classed("selectedSectionButton",false);e.classed("selectedSectionButton",true);p=t;if(h==0){document.getElementById("sourcesbuttondivid").style["display"]="none";document.getElementById("scrollcommandid").innerHTML="SCROLL"}else{document.getElementById("sourcesbuttondivid").style["display"]="block"}};buildPage=function(){var e,s,u;for(e=0;e<g.length;e++){o+=g[e].duration;if($.inArray(g[e].wrapper,r)==-1){r.push(g[e].wrapper)}for(s=0;s<g[e].animations.length;s++){Object.keys(g[e].animations[s]).forEach(function(t){value=g[e].animations[s][t];if(t!=="selector"&&value instanceof Array===false){var n=[];n.push(getDefaultPropertyValue(t),value);value=n}g[e].animations[s][t]=value})}}n.height(o);t.scroll(0);i=r[0];$(i).show()};convertAllPropsToPx=function(){var e,t,n;for(e=0;e<g.length;e++){g[e].duration=convertPercentToPx(g[e].duration,"y");for(t=0;t<g[e].animations.length;t++){Object.keys(g[e].animations[t]).forEach(function(r){value=g[e].animations[t][r];if(r!=="selector"){if(value instanceof Array){for(n=0;n<value.length;n++){if(typeof value[n]==="string"){if(r==="translateY"){value[n]=convertPercentToPx(value[n],"y")}else{value[n]=convertPercentToPx(value[n],"x")}}}}else{if(typeof value==="string"){if(r==="translateY"){value=convertPercentToPx(value,"y")}else{value=convertPercentToPx(value,"x")}}}g[e].animations[t][r]=value}})}}};getDefaultPropertyValue=function(e){switch(e){case"translateX":return 0;case"translateY":return 0;case"scale":return 1;case"rotate":return 0;case"opacity":return 1;default:return null}};updatePage=function(){if(frogActive()&&!x){if(S){S=false;frogplayer.play();p=1;t.scrollTop(convertPercentToPx(y[p],"y"))}return}if(p==5){document.getElementById("scrollingid").style["display"]="none"}else{document.getElementById("scrollingid").style["display"]="block"}if(p==0||p==5){document.getElementById("viscopyid").style["display"]="none";document.getElementById("dragtooltipid").style["opacity"]=0}else{document.getElementById("viscopyid").style["display"]="block";document.getElementById("dragtooltipid").style["opacity"]=1}setScrollTops();if(S){S=false;console.log(p);p=p+1;t.scrollTop(convertPercentToPx(y[p],"y"));return}if(l>0&&l<=o-u){animateElements();setKeyframe();scrollpos=Math.max(0,$(window).scrollTop());vis(scrollpos)}};var T=1e3;var N=false;var C=true;vis=function(e){if(h==0||h==9){hideVis();N=false;if(h==0){updateButtons(d3.select(document.getElementById("titlebutton")),E[h])}else{updateButtons(d3.select(document.getElementById("sourcebuttonspanid")),E[h])}document.getElementById("helpbuttonid").style.display="none"}else{if(!N){showVis();N=true}var t=b[h];if(!(t==currclassindex)){changeClass(t)}document.getElementById("helpbuttonid").style.display="block";updateButtons(d3.select(document.getElementById(w[h])),E[h])}};setScrollTops=function(){l=t.scrollTop();c=l-f};animateElements=function(){var e,t,n,r,i,s;for(var o=0;o<g[h].animations.length;o++){e=g[h].animations[o];t=calcPropValue(e,"translateY");n=calcPropValue(e,"translateX");r=calcPropValue(e,"scale");i=calcPropValue(e,"rotate");s=calcPropValue(e,"opacity");$(e.selector).css({transform:"translate3d("+n+"px, "+t+"px, 0) scale("+r+") rotate("+i+"deg)",opacity:s})}};calcPropValue=function(e,t){var n=e[t];if(n){n=easeInOutQuad(c,n[0],n[1]-n[0],g[h].duration)}else{n=getDefaultPropertyValue(t)}return n};easeInOutQuad=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t};setKeyframe=function(){if(l>g[h].duration+f){f+=g[h].duration;h++;showCurrentWrappers()}else if(l<f){h--;f-=g[h].duration;showCurrentWrappers()}};showCurrentWrappers=function(){var e;if(g[h].wrapper!=i){$(i).hide();$(g[h].wrapper).show();i=g[h].wrapper}};convertPercentToPx=function(e,t){if(typeof e==="string"&&e.match(/%/g)){if(t==="y")e=parseFloat(e)/100*u;if(t==="x")e=parseFloat(e)/100*a}return e};throwError=function(){n.addClass("page-error")};isTouchDevice=function(){return"ontouchstart"in window||"onmsgesturechange"in window};init()});incrementProgress()}).call(this)